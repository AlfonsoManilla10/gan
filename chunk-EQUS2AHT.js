import{b as z,d as P,e as k,f as F,g as O,h as T,r as N,u as W}from"./chunk-TOZGBBW3.js";import{h as D,i as I}from"./chunk-B2E53Q3J.js";import{W as x,na as E}from"./chunk-KPZBUCCV.js";import{w as L}from"./chunk-VIKG75FC.js";import{Db as m,Eb as S,Pb as l,Qa as s,Qb as y,Vb as p,Wb as h,Xb as f,Z as c,Zb as v,_a as g,_b as M,da as w,eb as C,jb as u,pb as b,ub as o,vb as n,wb as _}from"./chunk-COZJJN5U.js";var j=()=>["/restablecer-contrasena"],R=()=>["/registro-usuario"];function V(i,B){if(i&1&&(o(0,"span",8),l(1),n()),i&2){let r=S();s(),y(r.error_messagge())}}var Y=(()=>{class i{constructor(){this._loginService=c(D),this._usuarioService=c(I),this.error_login=g(!1),this.error_messagge=g(""),this.password="",this.correo=""}closeModal(){}login(){let r=/^[a-z0-9!#$%&'*+\=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/;if(this.correo.length==0||!r.test(this.correo.toLowerCase())){this.showErrorLogin("Ingrese su correo");return}if(this.password.length==0){this.showErrorLogin("Ingrese su contrase\xF1a");return}this._loginService.login(this.correo,this.password).subscribe(t=>{t.success?(this._usuarioService.saveUser(t.data),this._usuarioService.setToken(t.data.token),location.reload(),this.closeModal()):this.showErrorLogin(t.msg)})}showErrorLogin(r){this.error_messagge.set(r),this.error_login.set(!0),setTimeout(()=>{this.error_login.set(!1)},4e3)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=w({type:i,selectors:[["app-modal-login"]],standalone:!0,features:[v],decls:18,vars:7,consts:[[1,"modal__content","modal__login","m-0-auto","bg-c-white","bor-rad-5","pos-relative"],[1,"modal__login-head","text-center","p-2"],[1,"ff-roboto"],[1,"m-0"],[1,"modal__login-body","p-1"],[3,"ngSubmit"],["type","email","name","txtEmail","id","txtEmail","placeholder","Correo Electr\xF3nico","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,3}$",1,"input-custom","mb-1","bg-b-white","ff-sans",3,"ngModelChange","ngModel"],["type","password","name","txtPassword","id","txtPassword","placeholder","Contrase\xF1a",1,"input-custom","mb-1","bg-b-white","ff-sans",3,"ngModelChange","ngModel"],[1,"text-c-red"],["type","submit",1,"d-block","bg-c-site","text-c-white","w-100","ff-sans","mt-1"],[1,"modal__login-footer","d-flex","flex-wrap","gap-1","justify-content-space-between","ff-sans","fw-700","p-1","pr-2","pl-2"],[3,"click","routerLink"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"div",1)(2,"h3",2),l(3,"Iniciar sesi\xF3n"),n()(),_(4,"hr",3),o(5,"div",4)(6,"form",5),m("ngSubmit",function(){return e.login()}),o(7,"input",6),f("ngModelChange",function(a){return h(e.correo,a)||(e.correo=a),a}),n(),o(8,"input",7),f("ngModelChange",function(a){return h(e.password,a)||(e.password=a),a}),n(),C(9,V,2,1,"span",8),o(10,"button",9),l(11,"Entrar"),n()()(),_(12,"hr",3),o(13,"div",10)(14,"a",11),m("click",function(){return e.closeModal()}),l(15,"Olvid\xE9 mi contrase\xF1a"),n(),o(16,"a",11),m("click",function(){return e.closeModal()}),l(17,"Reg\xEDstrate"),n()()()),t&2&&(s(7),p("ngModel",e.correo),s(),p("ngModel",e.password),s(),b(9,e.error_login()?9:-1),s(5),u("routerLink",M(5,j)),s(2),u("routerLink",M(6,R)))},dependencies:[L,W,T,z,P,k,N,O,F,E,x],styles:[".modal__login[_ngcontent-%COMP%]{width:90%}.modal__login-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.25rem}.modal__login-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.55rem}.modal__login-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.25rem}@media (max-width: 566px){.modal__login-footer[_ngcontent-%COMP%]{justify-content:center}}@media (min-width: 768px){.modal__login[_ngcontent-%COMP%]{width:100%;max-width:500px;min-width:500px}}"]})}}return i})();export{Y as a};
